(function(){"use strict";var e="stripe.checkout";var t="https://checkout.stripe.com/checkout.js";var n={key:"data-key",image:"data-image",name:"data-name",description:"data-description",amount:"data-amount",currency:"data-currency",panelLabel:"data-panel-label",zipCode:"data-zip-code",email:"data-email",label:"data-label"};var o={bitcoin:"data-bitcoin",allowRememberMe:"data-allow-remember-me",address:"data-address",billingAddress:"data-billingAddress",shippingAddress:"data-shippingAddress"};var i;if(typeof module!=="undefined"&&typeof module.exports==="object"){i=require("angular");module.exports=e}else{i=window.angular}var r=i.extend;i.module(e,[]).directive("stripeCheckout",a).provider("StripeCheckout",c);a.$inject=["$parse","StripeCheckout"];function a(e,t){return{link:i};function i(n,o,i){var a;t.load().then(function(){a=t.configure(r(o))});o.on("click",function(){if(a)a.open(r(o)).then(function(t){var o=e(i.stripeCheckout)(n);if(typeof o==="function")o.apply(null,t)})})}function r(e){var t,i,r={};for(t in n){i=e.attr(n[t]);if(typeof i!=="undefined")r[t]=i}for(t in o){i=e.attr(o[t]);if(typeof i==="string")r[t]=i.toLowerCase()==="true"}return r}}function c(){var e={};this.defaults=function(t){r(e,t)};this.load=function(e){return e.load()};this.load.$inject=["StripeCheckout"];this.$get=function(t,n){return new d(t,n,e)};this.$get.$inject=["$document","$q"]}function d(e,t,n){var o={},i;this.configure=function(e){return new u(t,r({},n,o,e))};this.load=function(){if(!i)i=s(e,t);return i};this.defaults=function(e){r(o,e)}}function u(e,t){var n,o;var i=StripeCheckout.configure(r({},t,{token:function(e,i){if(t.token)t.token(e,i);o=true;n.resolve([e,i])},closed:function(){if(t.closed)t.closed();if(!o)n.reject()}}));this.open=function(t){n=e.defer();o=false;i.open(t);return n.promise};this.close=function(){o=false;i.close();if(t.closed)t.closed();if(n)n.reject()}}function s(e,n){var o=n.defer();var i=e[0],r=i.createElement("script");r.src=t;r.onload=function(){o.resolve()};r.onreadystatechange=function(){var e=this.readyState;if(e==="loaded"||e==="complete")o.resolve()};r.onerror=function(){o.reject(new Error("Unable to load checkout.js"))};var a=i.getElementsByTagName("head")[0];a.appendChild(r);return o.promise}})();